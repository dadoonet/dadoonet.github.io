<!doctype html><html lang=en><meta charset=utf-8>
<meta name=viewport content="width=device-width">
<title>Elasticsearch et les "facets" - David Pilato</title>
<meta name=generator content="Hugo Eureka 0.8.4">
<link rel=stylesheet href=https://david.pilato.fr/css/eureka.min.css>
<script defer src=https://david.pilato.fr/js/eureka.min.js></script>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" as=style onload="this.onload=null,this.rel='stylesheet'">
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/solarized-light.min.css media=print onload="this.media='all',this.onload=null" crossorigin>
<script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js integrity="sha256-uNYoXefWRqv+PsIF/OflNmwtKM4lStn9yrz2gVl6ymo=" crossorigin></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X media=print onload="this.media='all',this.onload=null" crossorigin>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
<script defer src=https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/mermaid.min.js integrity="sha256-Zmpaaj+GXFsPF5WdPArSrnW3b30dovldeKsW00xBVwE=" crossorigin></script>
<link rel=preconnect href=https://www.google-analytics.com crossorigin>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-62381049-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-62381049-1')</script>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Elasticsearch et les &#34;facets&#34;">
<meta name=twitter:description content="Les aventures avec Elasticsearch se poursuivent.
Combien de fois ai-je dit récemment que ce projet est absolument génial et qu&rsquo;il va constituer à mon sens un des projets majeurs des prochaines années&mldr;
Qui n&rsquo;a pas besoin de moteur de recherche ? Qui s&rsquo;est déjà &ldquo;emmerdé&rdquo; à fabriquer ça lui-même ou à utiliser des briques pouvant aider au prix d&rsquo;une complexité plus ou moins grande de mise en oeuvre ?
Je crois que nous sommes tous passés par là !">
<meta name=description content="Les aventures avec Elasticsearch se poursuivent.
Combien de fois ai-je dit récemment que ce projet est absolument génial et qu&rsquo;il va constituer à mon sens un des projets majeurs des prochaines années&mldr;
Qui n&rsquo;a pas besoin de moteur de recherche ? Qui s&rsquo;est déjà &ldquo;emmerdé&rdquo; à fabriquer ça lui-même ou à utiliser des briques pouvant aider au prix d&rsquo;une complexité plus ou moins grande de mise en oeuvre ?
Je crois que nous sommes tous passés par là !">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://david.pilato.fr/blog/"},{"@type":"ListItem","position":2,"name":"Elasticsearch et les \"facets\"","item":"https://david.pilato.fr/blog/2011-06-20-elasticsearch-et-les-facets/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://david.pilato.fr/blog/2011-06-20-elasticsearch-et-les-facets/"},"headline":"Elasticsearch et les \u0022facets\u0022 - David Pilato","datePublished":"2011-06-20T20:34:49+00:00","dateModified":"2022-01-09T13:29:04+01:00","wordCount":1063,"author":{"@type":"Person","name":["David Pilato"]},"publisher":{"@type":"Person","name":"David Pilato"},"description":"Les aventures avec Elasticsearch se poursuivent.\nCombien de fois ai-je dit récemment que ce projet est absolument génial et qu\u0026rsquo;il va constituer à mon sens un des projets majeurs des prochaines années\u0026hellip;\nQui n\u0026rsquo;a pas besoin de moteur de recherche ? Qui s\u0026rsquo;est déjà \u0026ldquo;emmerdé\u0026rdquo; à fabriquer ça lui-même ou à utiliser des briques pouvant aider au prix d\u0026rsquo;une complexité plus ou moins grande de mise en oeuvre ?\nJe crois que nous sommes tous passés par là !"}</script><meta property="og:title" content="Elasticsearch et les &#34;facets&#34; - David Pilato">
<meta property="og:type" content="article">
<meta property="og:url" content="https://david.pilato.fr/blog/2011-06-20-elasticsearch-et-les-facets/">
<meta property="og:description" content="Les aventures avec Elasticsearch se poursuivent.
Combien de fois ai-je dit récemment que ce projet est absolument génial et qu&rsquo;il va constituer à mon sens un des projets majeurs des prochaines années&mldr;
Qui n&rsquo;a pas besoin de moteur de recherche ? Qui s&rsquo;est déjà &ldquo;emmerdé&rdquo; à fabriquer ça lui-même ou à utiliser des briques pouvant aider au prix d&rsquo;une complexité plus ou moins grande de mise en oeuvre ?
Je crois que nous sommes tous passés par là !">
<meta property="og:locale" content="en">
<meta property="og:site_name" content="David Pilato">
<meta property="article:published_time" content="2011-06-20T20:34:49+00:00">
<meta property="article:modified_time" content="2022-01-09T13:29:04+01:00">
<meta property="article:section" content="blog">
<meta property="article:tag" content="elasticsearch">
<meta property="article:tag" content="java">
<meta property="og:see_also" content="https://david.pilato.fr/blog/2011-05-13-couchdb/">
<meta property="og:see_also" content="https://david.pilato.fr/blog/2011-03-09-la-recherche-elastique/">
<body class="flex flex-col min-h-screen">
<header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm">
<div class="w-full max-w-screen-xl mx-auto"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");((storageColorScheme=='Auto'||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName('html')[0].classList.add('dark')</script>
<nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0">
<a href=/ class="mr-6 text-primary-text text-xl font-bold">David Pilato</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i>
</button>
<div id=target class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20">
<div class="md:flex md:h-16 text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0">
<a href=/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 selected-menu-item mr-4">Home</a>
<a href=/blog/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 selected-menu-item mr-4">Blog</a>
<a href=https://djdadoo.pilato.fr/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">DJ Mixes</a>
<a href=/authors/david-pilato/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">About me</a>
</div>
<div class=flex>
<div class="relative pt-4 md:pt-0">
<div class="cursor-pointer hover:text-eureka" id=lightDarkMode>
<i class="fas fa-adjust"></i>
</div>
<div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open>
</div>
<div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions>
<span class="px-4 py-1 hover:text-eureka" name=Light>Light</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>Dark</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>Auto</span>
</div>
</div>
</div>
</div>
<div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile>
</div>
</nav>
<script>let element=document.getElementById('lightDarkMode');storageColorScheme==null||storageColorScheme=='Auto'?document.addEventListener('DOMContentLoaded',()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change',switchDarkMode)}):storageColorScheme=="Light"?(element.firstElementChild.classList.remove('fa-adjust'),element.firstElementChild.setAttribute("data-icon",'sun'),element.firstElementChild.classList.add('fa-sun')):storageColorScheme=="Dark"&&(element.firstElementChild.classList.remove('fa-adjust'),element.firstElementChild.setAttribute("data-icon",'moon'),element.firstElementChild.classList.add('fa-moon')),document.addEventListener('DOMContentLoaded',()=>{getcolorscheme(),switchBurger()})</script>
</div>
</header>
<main class="flex-grow pt-16">
<div class=pl-scrollbar>
<div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto">
<div class="grid grid-cols-2 lg:grid-cols-8 gap-4 lg:pt-12">
<div class="col-span-2 lg:col-span-6 bg-secondary-bg rounded px-6 py-8">
<h1 class="font-bold text-3xl text-primary-text">Elasticsearch et les "facets"</h1>
<div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text">
<div class="mr-6 my-2">
<i class="fas fa-calendar mr-1"></i>
<span>2011-06-20</span>
</div>
<div class="mr-6 my-2">
<i class="fas fa-clock mr-1"></i>
<span>5 min read</span>
</div>
<div class="mr-6 my-2">
<i class="fas fa-folder mr-1"></i>
<a href=https://david.pilato.fr/categories/tutorial/ class=hover:text-eureka>tutorial</a>
</div>
<div class="mr-6 my-2">
<i class="fas fa-th-list mr-1"></i>
<a href=https://david.pilato.fr/series/d%C3%A9couverte-elasticsearch/ class=hover:text-eureka>Découverte Elasticsearch</a>
</div>
</div>
<div class=content>
<p>Les aventures avec Elasticsearch <a href=https://david.pilato.fr/blog/2011-03-09-la-recherche-elastique/>se poursuivent</a>.</p>
<p>Combien de fois ai-je dit récemment que ce projet est absolument génial et qu&rsquo;il va constituer à mon sens un des projets majeurs des prochaines années&mldr;</p>
<p>Qui n&rsquo;a pas besoin de moteur de recherche ? Qui s&rsquo;est déjà &ldquo;emmerdé&rdquo; à fabriquer ça lui-même ou à utiliser des briques pouvant aider au prix d&rsquo;une complexité plus ou moins grande de mise en oeuvre ?</p>
<p>Je crois que nous sommes tous passés par là !!!</p>
<p>Et là, ce projet permet en quelques heures (minutes) de faire tourner un moteur de recherche complet&mldr;</p>
<h2 id=les-facettes-facets>Les facettes (facets)</h2>
<p>Bref, là n&rsquo;est pas mon propos d&rsquo;aujourd&rsquo;hui. Le thème du jour est la notion de facets. Je l&rsquo;ai testé en quelques minutes sur une base de 1,5 millions de documents indexés à mon boulot. Résultat bluffant !</p>
<p>Une facette permet d&rsquo;ajouter des informations à un résultat de recherche. Imaginez un site marchand. Vous cherchez un ou plusieurs mots, par exemple : rasoir.</p>
<p>Le site vous fournit une liste des éléments correspondants et en général ajoute des informations pour vous aider à affiner votre recherche.</p>
<p>Par exemple, le nom des fabricants de ces produits avec le nombre d&rsquo;objets trouvés pour les 10 principaux fabricants. Dans notre cas, on pourrait avoir par exemple :</p>
<ul>
<li>Tous (134)</li>
<li>Philips (35)</li>
<li>Braun (21)</li>
<li>Calor (12)</li>
</ul>
<p>Ce résultat qui décore notre résultat de recherche se nomme une facette (facet in english).</p>
<p>Il existe différents types de facettes. Celle dont nous venons de parler est une facette de type TERMS, c&rsquo;est à dire qu&rsquo;Elastic Search va renvoyer la distribution des 10 principaux termes trouvés pour une propriété donnée des documents par rapport à une requête.</p>
<pre><code class=language-js>{
  &quot;query&quot; : {
    &quot;match_all&quot; : { }
  },
  &quot;facets&quot; : {
    &quot;tag&quot; : {
      &quot;terms&quot; : {
        &quot;field&quot; : &quot;tag&quot;,
        &quot;size&quot; : 10
      }
    }
  }
}
</code></pre>
<p>En passant une requête de ce type, on obtiendra la consolidation et le comptage associé de tous les principaux termes du champ tag de toute notre base de documents.</p>
<p>Il existe d&rsquo;autres types de facettes très intéressantes :</p>
<ul>
<li>
<p>les facettes <a href=http://www.elastic.co/guide/en/elasticsearch/reference/0.90/search-facets-range-facet.html>RANGE</a> : pour donner une distribution sur un intervale de valeurs. Par exemple, pour reprendre notre exemple de site marchand, vous pouvez utiliser la facette RANGE pour donner la distribution des prix pour les intervales de 0 à 10 €, de 10 à 20 €, de 20 à 50 € et au delà de 50 €.</p>
</li>
<li>
<p>les facettes <a href=http://www.elastic.co/guide/en/elasticsearch/reference/0.90/search-facets-date-histogram-facet.html>DATE HISTOGRAM</a> : pour donner un comptage avec un axe X des temps (période à décider : jour, mois, année, &mldr;). Par exemple, le nombre de vente par mois pour un produit donné.</p>
</li>
</ul>
<p>La liste complète est disponible sur le site <a href=http://www.elastic.co/guide/en/elasticsearch/reference/0.90/search-facets.html>d&rsquo;elasticsearch</a>.</p>
<h2 id=et-les-résultats->Et les résultats ?</h2>
<p>Là où cela devient très fort, c&rsquo;est que cette recherche s&rsquo;exécute en temps réel, même sur des données &ldquo;neuves&rdquo; qui arrivent en permanence et avec un temps de réponse assez incroyable.</p>
<p>A titre d&rsquo;exemple, sur la base de 1,5 millions de documents que je citais plus haut en début de document, j&rsquo;ai pu ainsi faire un outil d&rsquo;analyse rapidement (à peine 4 heures de boulot - et encore, c&rsquo;est juste parce que je ne suis pas assez bon en Javascript !) sur des déclarations en douane. Ce qui est surprenant, c&rsquo;est que sans avoir fait le moindre effort d&rsquo;optimisation, nous avons pu regarder l&rsquo;effet des saisons sur l&rsquo;importation de tomates au fur et à mesure des années et sur les TOP 10 des pays d&rsquo;importation !</p>
<p>Pour réaliser cela, je n&rsquo;ai fait que suivre l&rsquo;excellent article sur le blog d'<a href=https://www.elastic.co/blog/data-visualization-with-elasticsearch-and-protovis/>elasticsearch</a>. Je ne peux pas malheureusement pas vous montrer le résultat :-( Mais sachez que cela réagit en quelques secondes sur un poste bureautique avec peu de mémoire. Alors, imaginez si vous mettez cela en production avec 16 ou 32 Go de RAM distribué sur plusieurs noeuds !!!</p>
<p>Vous pouvez également utiliser le résultat des facettes comme point d&rsquo;entrée ergonomique pour filtrer ensuite le résultat de vos recherches : un clic sur le nom du fabriquant du produit fera par exemple la même recherche dans Elastic Search avec en plus un filtre posé sur le nom du fabriquant.</p>
<h2 id=quelles-conclusions-en-tirer->Quelle(s) conclusion(s) en tirer ?</h2>
<p>Bon, j&rsquo;ai un peu bluffé dans mon premier exemple&mldr; La possibilité d&rsquo;avoir la somme totale de tous les résultats ( Tous (134) ) n&rsquo;existe pas encore. Shay Banon, l&rsquo;auteur du projet, a accepté ma <a href=https://github.com/elastic/elasticsearch/issues/1029>demande d&rsquo;évolution #1029</a> à ce sujet. Pour le moment, il faut faire un calcul à la main (enfin, en javascript je veux dire) !</p>
<p>Dans la même requête, vous pouvez associer plusieurs facettes d&rsquo;un seul coup. Dans mon cas de démo au boulot, j&rsquo;ai mis 5 facettes. Un appel = les 10 premiers résultats de ma recherche plus 5 facettes d&rsquo;analyse des données&mldr;</p>
<p>Sinon, oubliez les requêtes SQL que vous faites tourner pendant quelques minutes pour vous fabriquer vos statistiques. Oubliez les moteurs de recherche en SQL (si ! si ! ça existe encore !). Je me demande du coup quel sera le devenir de projets comme Hibernate Search ? Même si avec la sortie d&rsquo;Hibernate OGM, on sent une tentative astucieuse de garder la communauté des développeurs Hibernate.</p>
<p>Pour ma part, j&rsquo;avais commencé à écrire un plugin Hibernate pour elasticsearch mais finalement je l&rsquo;ai supprimé de mon projet car il n&rsquo;apporte quasiment que des contraintes pour le peu d&rsquo;intérêt qu&rsquo;il apporte. Une vraie novation pourrait être d&rsquo;ajouter à Hibernate Search un stockage des données dans elasticsearch, mais Shay Banon a un point de vue divergent sur les annotations utilisées. Du coup, un projet (OSEM) soutenu par Shay a vu le jour grâce à l&rsquo;excellent travail d'<a href=https://github.com/aloiscochard/elasticsearch-osem>Aloïs Cochard</a>. Une fois stabilisé, ce projet rejoindra le projet elasticsearch afin de proposer des annotations standards pour vos objets Java à rendre cherchables (Searchable).</p>
<p>De mon côté, je réfléchis au développement d&rsquo;un simple plugin maven pour générer automatiquement les fichiers de mapping pour elasticsearch basés sur les entités annotées <a href=https://github.com/aloiscochard/elasticsearch-osem/blob/master/src/main/java/org/elasticsearch/osem/annotations/Searchable.java>Searchable</a>. A suivre donc !</p>
<p>Installez chez vous elasticsearch et testez juste en ligne de commande (avec des curl) ces fonctionnalités et dites vous que le petit résultat que vous observez sur quelques documents tient autant la route sur une forte volumétrie&mldr; C&rsquo;est la puissance de Lucene associée à l&rsquo;ingéniosité de l&rsquo;auteur d&rsquo;elasticsearch qui met ainsi à notre disposition un outil simple, basé sur des technos simples mais au combien efficace !!!</p>
<p>Je vous ai dit que j&rsquo;adore ce projet ???? 😉</p>
</div>
<div class=my-4>
<a href=https://david.pilato.fr/tags/elasticsearch/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#elasticsearch</a>
<a href=https://david.pilato.fr/tags/java/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#java</a>
</div>
<div class="flex md:justify-end my-4">
<style>#share-buttons{display:inline-block;vertical-align:middle}#share-buttons:after{content:"";display:block;clear:both}#share-buttons>div{position:relative;text-align:left;height:36px;width:32px;float:left;text-align:center}#share-buttons>div>svg{height:16px;fill:#000;margin-top:10px}#share-buttons>div:hover{cursor:pointer}#share-buttons>div.facebook:hover>svg{fill:#3b5998}#share-buttons>div.twitter:hover>svg{fill:#55acee}#share-buttons>div.linkedin:hover>svg{fill:#0077b5}#share-buttons>div.pinterest:hover>svg{fill:#cb2027}#share-buttons>div.mail:hover>svg{fill:#7d7d7d}#share-buttons>div.facebook>svg{height:18px;margin-top:9px}#share-buttons>div.twitter>svg{height:20px;margin-top:8px}#share-buttons>div.linkedin>svg{height:19px;margin-top:7px}#share-buttons>div.pinterest>svg{height:20px;margin-top:9px}#share-buttons>div.mail>svg{height:14px;margin-top:11px}</style>
<div id=share-buttons>
<div class=facebook title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=https://david.pilato.fr/blog/2011-06-20-elasticsearch-et-les-facets/')"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"/></svg></div>
<div class=twitter title="Share this on Twitter" onclick="window.open('http://twitter.com/intent/tweet?via=dadoonet&text=🧑🏼‍💻 Blog: Elasticsearch et les \u0022facets\u0022 👉🏼&url=https://david.pilato.fr/blog/2011-06-20-elasticsearch-et-les-facets/')"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
<div class=linkedin title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=https://david.pilato.fr/blog/2011-06-20-elasticsearch-et-les-facets/&title=&summary=&source=')"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"/></svg></div>
<div class=mail title="Share this through Email" onclick="window.open('mailto:?&body=https://david.pilato.fr/blog/2011-06-20-elasticsearch-et-les-facets/')"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47H160q-66 0-113-47T0 1504V710q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 1e2-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38T639 1015q-91-64-262-182.5T172 690q-62-42-117-115.5T0 438q0-78 41.5-130T160 256h1472q65 0 112.5 47t47.5 113z"/></svg></div>
</div>
<a href=https://github.com/dadoonet/dadoonet.github.io/tree/main/content/blog/2011-06-20-elasticsearch-et-les-facets/index.md title="Edit this page">
<i class="fas fa-edit mr-1"></i>
</a>
</div>
<div class=py-2>
<div class="flex flex-col md:flex-row items-center my-8">
<a href=https://david.pilato.fr/authors/david-pilato/ class="w-24 h-24 md:mr-4">
<img src=https://david.pilato.fr/authors/david-pilato/david_pilato.png class="w-full bg-primary-bg rounded-full" alt=Avatar>
</a>
<div class="w-full md:w-auto mt-4 md:mt-0">
<a href=https://david.pilato.fr/authors/david-pilato/ class="block font-bold text-lg pb-1 mb-2 border-b">David Pilato</a>
<span class="block pb-2">20+ years of experience, mostly in Java. Living in Cergy, France.</span>
<a href=mailto:david+blog@pilato.fr class=mr-1>
<i class="fas fa-envelope"></i>
</a>
<a href=https://twitter.com/dadoonet class=mr-1>
<i class="fab fa-twitter"></i>
</a>
<a href=https://github.com/dadoonet class=mr-1>
<i class="fab fa-github"></i>
</a>
<a href=https://www.linkedin.com/in/dadoonet/ class=mr-1>
<i class="fab fa-linkedin"></i>
</a>
</div>
</div>
</div>
<div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t">
<div>
<span class="block font-bold">Previous</span>
<a href=https://david.pilato.fr/blog/2011-09-14-mon-premier-plugin-elasticsearch-rss-river/ class=block>Mon premier plugin elasticsearch : RSS River</a>
</div>
<div class="md:text-right mt-4 md:mt-0">
<span class="block font-bold">Next</span>
<a href=https://david.pilato.fr/blog/2011-05-13-couchdb/ class=block>CouchDB</a>
</div>
</div>
<script id=utterances src=https://utteranc.es/client.js issue-term=pathname label=💬 comments repo=dadoonet/dadoonet.github.io theme=preferred-color-scheme crossorigin=anonymous async></script>
<script>storageColorScheme=="Light"?document.getElementById('utterances').setAttribute('theme','github-light'):storageColorScheme=="Dark"&&document.getElementById('utterances').setAttribute('theme','github-dark')</script>
</div>
<div class=col-span-2>
<div class="bg-secondary-bg rounded p-6">
<h3 class="text-lg font-semibold mb-4">Series of Posts</h3>
<div class=content>
<a href=https://david.pilato.fr/blog/2011-06-20-elasticsearch-et-les-facets/>Elasticsearch et les "facets"</a>
<br>
<a href=https://david.pilato.fr/blog/2011-05-13-couchdb/>CouchDB</a>
<br>
<a href=https://david.pilato.fr/blog/2011-03-09-la-recherche-elastique/>La recherche élastique...</a>
<br>
</div>
</div>
<div class="sticky top-16 z-10 hidden lg:block px-6 py-4 bg-primary-bg">
<span class="text-lg font-semibold">On This Page</span>
</div>
<div class="sticky-toc hidden lg:block px-6 pb-6">
<nav id=TableOfContents>
<ul>
<li><a href=#les-facettes-facets>Les facettes (facets)</a></li>
<li><a href=#et-les-résultats->Et les résultats ?</a></li>
<li><a href=#quelles-conclusions-en-tirer->Quelle(s) conclusion(s) en tirer ?</a></li>
</ul>
</nav>
</div>
<script>window.addEventListener('DOMContentLoaded',()=>{enableStickyToc()})</script>
</div>
<div class="col-span-2 lg:col-span-6 bg-secondary-bg rounded p-6">
<h2 class="text-lg font-semibold mb-4">See Also</h2>
<div class=content>
<a href=https://david.pilato.fr/blog/2011-03-09-la-recherche-elastique/>La recherche élastique...</a>
<br>
<a href=https://david.pilato.fr/blog/2011-05-13-couchdb/>CouchDB</a>
<br>
<a href=https://david.pilato.fr/blog/2010-02-25-utiliser-jetty-7-avec-maven/>Utiliser Jetty 7 avec Maven</a>
<br>
<a href=https://david.pilato.fr/blog/2010-02-24-probleme-jetty-maven-sous-windows/>Problème Jetty / Maven sous Windows</a>
<br>
<a href=https://david.pilato.fr/blog/2010-02-24-utilisation-du-mode-lazy-dhibernate-avec-struts-et-spring/>Utilisation du mode Lazy d'Hibernate avec Struts et Spring</a>
<br>
<a href=https://david.pilato.fr/blog/2010-01-23-decouverte-de-google-app-engine-pour-java/>Découverte de Google App Engine pour Java</a>
<br>
</div>
</div>
</div>
<script>document.addEventListener('DOMContentLoaded',()=>{hljs.initHighlightingOnLoad()})</script>
</div>
</div>
</main>
<footer class=pl-scrollbar>
<div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b">
<p class="text-sm text-tertiary-text">&copy; 2022, David Pilato, France
&#183; Powered by the <a href=https://github.com/wangchucheng/hugo-eureka class=hover:text-eureka>Eureka</a> theme for <a href=https://gohugo.io class=hover:text-eureka>Hugo</a></p>
</div><div class="text-center p-1 pin-b">
<p class="text-sm text-tertiary-text">Generated from 🇫🇷 with ❤️ on Mon Jan 10, 2022 at 11:28:56 UTC</p>
</div></div>
</footer>
</body>
</html>