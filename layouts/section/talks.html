{{ define "title" }}
{{- .Title -}}
{{ end }}

{{ define "main"}}

<div class="mt-8 lg:mt-12 px-4">
  <div class="mx-auto prose dark:prose-invert">
    <h1 class="text-3xl">
      <ion-icon name="megaphone" class="text-primary"></ion-icon>
      {{ default "Talks" .Title }}
    </h1>
    {{ if .Content }}
    <p class="text-sm">{{ .Content }}</p>
    {{ end }}
  </div>

  <div class="max-w-[65ch] mx-auto mt-8 lg:mt-12">
    <ul class="timeline timeline-vertical">
      {{ $groupLayout := default "2006" .Params.groupLayout }}
      {{ range .Pages.GroupByDate $groupLayout }}
      <li class="[--timeline-col-start:64px]">
        <hr class="dark:bg-base-content" />
        <div class="timeline-start justify-self-start!">
          <div class="text-lg font-semibold">{{ .Key }}</div>
        </div>
        <div class="timeline-middle flex items-center mx-8 my-2">
          <ion-icon name="time"></ion-icon>
        </div>
        <div class="timeline-end timeline-box dark:border-base-content/60 prose dark:prose-invert my-8 text-sm">


          {{ range .Pages.ByDate.Reverse }}
          <article class="card bg-base-200 shadow-xl hover:shadow-2xl transition-shadow duration-300">
            <div class="card-body">
              <h2 class="card-title text-lg">{{ .Title }}</h2>
              {{ if .Description }}
              <p class="text-sm text-base-content/70 line-clamp-3">{{ .Description }}</p>
              {{ end }}
              {{ $cover := .Resources.GetMatch .Params.cover }}
              {{ if $cover }}
              <figure class="relative overflow-hidden">
                <img src="{{ $cover.RelPermalink }}" alt="{{ .Title }}" class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300" />
              </figure>
              {{ end }}
              <div class="flex flex-wrap gap-2 mt-2">
                {{ partial "countryFlag.html" .Params.conference }}
                {{ $pdf := .Resources.GetMatch "*.pdf" }}
                {{ if $pdf }}
                <span class="badge badge-outline badge-sm">
                  <ion-icon name="easel" class="mr-1"></ion-icon>
                  Slides
                </span>
                {{ end }}
                {{ if .Params.youtube }}
                <span class="badge badge-outline badge-sm">
                  <ion-icon name="logo-youtube" class="mr-1"></ion-icon>
                  Video
                </span>
                {{ end }}
              </div>
              <div class="card-actions justify-between items-center mt-4">
                <span class="text-xs text-base-content/50">{{ .Params.conference.name }}</span>
                <span class="text-xs text-base-content/50">
                  {{ .Params.conference.city }}
                  {{ .Date | time.Format "Jan 2, 2006" }}
                </span>
                <a href="{{ .RelPermalink }}" class="btn btn-primary btn-sm">
                  Read
                  <ion-icon name="arrow-forward"></ion-icon>
                </a>
              </div>
            </div>
          </article>
          {{ end }}

        </div>
        <hr class="dark:bg-base-content" />
      </li>
      {{ end }}
    </ul>
  </div>
</div>

{{ end }}
